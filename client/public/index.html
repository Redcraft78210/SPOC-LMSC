<!DOCTYPE html>
<html lang="fr" data-bs-theme="light">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="SPOC - Private MOOC Application">
  <title>SPOC LMSC</title>
  <!-- FAVICON AND WEBMANIFEST -->
  <link rel="icon" type="image/png" href="%PUBLIC_URL%/favicon-96x96.png" sizes="96x96" />
  <link rel="icon" type="image/svg+xml" href="%PUBLIC_URL%/favicon.svg" />
  <link rel="shortcut icon" href="%PUBLIC_URL%/favicon.ico" />
  <link rel="apple-touch-icon" sizes="180x180" href="%PUBLIC_URL%/apple-touch-icon.png" />
  <meta name="apple-mobile-web-app-title" content="SPOC LMSC" />
  <link rel="manifest" href="%PUBLIC_URL%/site.webmanifest" />

  <link rel="stylesheet" href="/styles/output.css">


</head>

<body>
  <noscript>You need to enable JavaScript to run this app.</noscript>
  <div id="root"></div>

  <script>
    (function () {
      // Retrieve saved theme preference
      const savedTheme = localStorage.getItem('darkMode');
      const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

      // Determine initial theme
      const darkModeOn = savedTheme !== null ? JSON.parse(savedTheme) : systemPrefersDark;
      document.documentElement.setAttribute('data-bs-theme', darkModeOn ? 'dark' : 'light');

      // Function to update theme dynamically
      const updateTheme = (e) => {
        const darkModeOn = e.matches;
        document.documentElement.setAttribute('data-bs-theme', darkModeOn ? 'dark' : 'light');
        localStorage.setItem('darkMode', darkModeOn);

        // If a switch element exists, update its state
        const switchElement = document.getElementById('switch');
        if (switchElement) {
          switchElement.checked = darkModeOn;
        }
      };

      // Add event listener for system theme changes
      const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');
      if (mediaQuery.addEventListener) {
        mediaQuery.addEventListener('change', updateTheme);
      } else if (mediaQuery.addListener) { // Fallback for older browsers
        mediaQuery.addListener(updateTheme);
      }
    })();
  </script>

</body>

</html>